<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.web.dao.ADangerManualMapper">
  <resultMap id="BaseResultMap" type="com.spring.web.model.ADangerManual">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <constructor>
      <idArg column="id" javaType="java.lang.Integer" jdbcType="INTEGER" />
      <arg column="industry" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="level1" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="level2" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="level3" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="factors" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="type" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="measures" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="reference" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="flag" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="level" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="flag2" javaType="java.lang.String" jdbcType="VARCHAR" />
    </constructor>
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, industry, level1, level2, level3, factors, type, measures, reference, flag, level,
    flag2
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <include refid="Base_Column_List" />
    from a_danger_manual_tbl
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from a_danger_manual_tbl
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.spring.web.model.ADangerManual">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into a_danger_manual_tbl (industry, level1, level2,
    level3, factors, type,
    measures, reference, flag,
    level, flag2)
    values (#{industry,jdbcType=VARCHAR}, #{level1,jdbcType=VARCHAR}, #{level2,jdbcType=VARCHAR},
    #{level3,jdbcType=VARCHAR}, #{factors,jdbcType=VARCHAR}, #{type,jdbcType=VARCHAR},
    #{measures,jdbcType=VARCHAR}, #{reference,jdbcType=VARCHAR}, #{flag,jdbcType=VARCHAR},
    #{level,jdbcType=VARCHAR}, #{flag2,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.spring.web.model.ADangerManual">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into a_danger_manual_tbl
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="industry != null">
        industry,
      </if>
      <if test="level1 != null">
        level1,
      </if>
      <if test="level2 != null">
        level2,
      </if>
      <if test="level3 != null">
        level3,
      </if>
      <if test="factors != null">
        factors,
      </if>
      <if test="type != null">
        type,
      </if>
      <if test="measures != null">
        measures,
      </if>
      <if test="reference != null">
        reference,
      </if>
      <if test="flag != null">
        flag,
      </if>
      <if test="level != null">
        level,
      </if>
      <if test="flag2 != null">
        flag2,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="industry != null">
        #{industry,jdbcType=VARCHAR},
      </if>
      <if test="level1 != null">
        #{level1,jdbcType=VARCHAR},
      </if>
      <if test="level2 != null">
        #{level2,jdbcType=VARCHAR},
      </if>
      <if test="level3 != null">
        #{level3,jdbcType=VARCHAR},
      </if>
      <if test="factors != null">
        #{factors,jdbcType=VARCHAR},
      </if>
      <if test="type != null">
        #{type,jdbcType=VARCHAR},
      </if>
      <if test="measures != null">
        #{measures,jdbcType=VARCHAR},
      </if>
      <if test="reference != null">
        #{reference,jdbcType=VARCHAR},
      </if>
      <if test="flag != null">
        #{flag,jdbcType=VARCHAR},
      </if>
      <if test="level != null">
        #{level,jdbcType=VARCHAR},
      </if>
      <if test="flag2 != null">
        #{flag2,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.spring.web.model.ADangerManual">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update a_danger_manual_tbl
    <set>
      <if test="industry != null">
        industry = #{industry,jdbcType=VARCHAR},
      </if>
      <if test="level1 != null">
        level1 = #{level1,jdbcType=VARCHAR},
      </if>
      <if test="level2 != null">
        level2 = #{level2,jdbcType=VARCHAR},
      </if>
      <if test="level3 != null">
        level3 = #{level3,jdbcType=VARCHAR},
      </if>
      <if test="factors != null">
        factors = #{factors,jdbcType=VARCHAR},
      </if>
      <if test="type != null">
        type = #{type,jdbcType=VARCHAR},
      </if>
      <if test="measures != null">
        measures = #{measures,jdbcType=VARCHAR},
      </if>
      <if test="reference != null">
        reference = #{reference,jdbcType=VARCHAR},
      </if>
      <if test="flag != null">
        flag = #{flag,jdbcType=VARCHAR},
      </if>
      <if test="level != null">
        level = #{level,jdbcType=VARCHAR},
      </if>
      <if test="flag2 != null">
        flag2 = #{flag2,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.spring.web.model.ADangerManual">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update a_danger_manual_tbl
    set industry = #{industry,jdbcType=VARCHAR},
    level1 = #{level1,jdbcType=VARCHAR},
    level2 = #{level2,jdbcType=VARCHAR},
    level3 = #{level3,jdbcType=VARCHAR},
    factors = #{factors,jdbcType=VARCHAR},
    type = #{type,jdbcType=VARCHAR},
    measures = #{measures,jdbcType=VARCHAR},
    reference = #{reference,jdbcType=VARCHAR},
    flag = #{flag,jdbcType=VARCHAR},
    level = #{level,jdbcType=VARCHAR},
    flag2 = #{flag2,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>

  <select id="selectByIndustry" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from a_danger_manual_tbl
    where
    industry = #{industry }
  </select>


  <select id="selectByIndustryAll" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from a_danger_manual_tbl
    where
    industry = #{industry } and level3 = #{level3}
  </select>








  <select id="selectByIds" resultType="com.spring.web.model.ACompanyManual">
    <!--
    fix a bug "id dmid" to "id" zhangcl 2018.10.27
    it's a wrong fix, put it right by zhangcl 2018.12.7
  -->
    select
    id dmid, level1, level2, level3, factors, type, measures, reference, flag, flag2, level
    from a_danger_manual_tbl
    where
    id in
    <foreach close=")" collection="ids" item="item" open="(" separator=",">
      #{item}
    </foreach>
  </select>


  <select id="selectById" resultType="com.spring.web.model.ACompanyManual">
    <!--
    fix a bug "id dmid" to "id" zhangcl 2018.10.27
    it's a wrong fix, put it right by zhangcl 2018.12.7
  -->
    select * from a_danger_manual_tbl WHENEVER id =  (select dmid  from a_company_manual_tbl where id = #{id});

  </select>



  <select id="selectFactors" resultType="com.spring.web.model.ADangerManual">

    select * from a_danger_manual_tbl where flag = #{flag} and industry = #{industry} ;

  </select>







  <select id="selectIndustryByid" resultType="String">
     select industry as name from  a_danger_manual_tbl where  id =  (select dmid  from a_company_manual_tbl where id = #{id});

  </select>


  <select id="selectByMap" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from a_danger_manual_tbl T1
    <where>
      <if test="industry != null">
        and T1.industry = #{industry}
      </if>
      <if test="level1 != null">
        and T1.level1 in (${level1})
      </if>
      <if test="flag != null">
        and T1.flag in (${flag})
      </if>
    </where>
    order by T1.id desc
  </select>

</mapper>