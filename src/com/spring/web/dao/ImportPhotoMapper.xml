<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.web.dao.ImportPhotoMapper">

    <resultMap id="BaseResultMap" type="com.spring.web.model.request.ImportPhoto">
        <constructor>
            <idArg column="id" javaType="java.lang.Integer" jdbcType="INTEGER"/>
            <arg column="url" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="user_id" javaType="java.lang.Integer" jdbcType="INTEGER"/>
            <arg column="name" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="coordinate" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="url1" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="photo_color" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="flag" javaType="java.lang.Integer" jdbcType="INTEGER"/>
        </constructor>
    </resultMap>
    <sql id="Base_Column_List">
        id, url, user_id, name, coordinate, url1, photo_color, flag
    </sql>

    <!-- 添加数据信息 -->
    <insert id="savePhoto" parameterType="com.spring.web.model.request.TMap" >
         insert into import_photo (url,user_id,name,url1,flag) values(#{url},#{user_id},#{name},#{url1},#{flag});
    </insert>

    <!-- 添加数据信息 -->
    <insert id="saveCoordinate" parameterType="com.spring.web.model.request.TMap" >
        insert into import_photo (coordinate) values(#{coordinate}) where id = #{id};
    </insert>

    <!-- 删除数据信息 -->
    <delete id="deletePhoto" parameterType="Integer" >
        delete from import_photo where id= #{id};
    </delete>

    <!-- 查询数据信息 -->
    <select id="selectPhoto" parameterType="Integer" resultType="com.spring.web.model.request.ImportPhoto">
        select
        <include refid="Base_Column_List"/>
        from import_photo where user_id= #{userId};
    </select>


    <!-- 查询数据信息 -->
    <select id="selectPhotoOne"  resultType="com.spring.web.model.request.ImportPhoto">
        select
        <include refid="Base_Column_List"/>
        from import_photo where user_id = #{userId,jdbcType=INTEGER} and flag = #{flag,jdbcType=INTEGER} order by id desc
    </select>


    <select id="selectAllById" parameterType="Integer" resultType="com.spring.web.model.request.ImportPhoto">
        select
        <include refid="Base_Column_List"/>
        from import_photo where id= #{id};
    </select>

    <!-- 查询数据信息 -->
    <select id="selectOne"  resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from import_photo where user_id = #{userId} and url = #{url};
    </select>

    <!-- 修改 数据 -->
    <update id="updatePhoto" parameterType="com.spring.web.model.request.ImportPhoto" >
        update import_photo
        <set>
            <if test="url != null">
                url = #{url,jdbcType=VARCHAR},
                url1 = #{url1,jdbcType=VARCHAR},
            </if>
        </set>
        where id = #{id,jdbcType=INTEGER}
    </update>

    <update id="updateByInportPhoto" parameterType="com.spring.web.model.request.ImportPhoto">
        update import_photo
        <set>
            <if test="url != null">
                url = #{url,jdbcType=VARCHAR},
            </if>
            <if test="coordinate != null">
                coordinate = #{coordinate,jdbcType=VARCHAR},
            </if>
            <if test="photo_color != null">
                photo_color = #{photo_color,jdbcType=VARCHAR},
            </if>
        </set>
        where id = #{id,jdbcType=INTEGER}
    </update>

    <!-- 根据 ID 修改数据信息 -->
    <update id="updatePhotoName" parameterType="com.spring.web.model.request.ImportPhoto" >
        update import_photo
        set name = #{name,jdbcType=VARCHAR}
        where id = #{id,jdbcType=INTEGER}
    </update>

</mapper>
