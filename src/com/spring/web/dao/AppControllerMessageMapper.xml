<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.web.dao.AppControllerMessageMapper">
<!--    <resultMap id="BaseResultMap" type="com.spring.web.model.AImplementation">-->
<!--        &lt;!&ndash;-->
<!--          WARNING - @mbggenerated-->
<!--          This element is automatically generated by MyBatis Generator, do not modify.-->
<!--        &ndash;&gt;-->
<!--        <constructor>-->
<!--            <idArg column="uid" javaType="java.lang.Integer" jdbcType="INTEGER" />-->
<!--        </constructor>-->
<!--    </resultMap>-->
<!--    <resultMap id="ResultMapMessages" type="com.spring.web.model.Messages">-->
<!--        &lt;!&ndash;-->
<!--          WARNING - @mbggenerated-->
<!--          This element is automatically generated by MyBatis Generator, do not modify.-->
<!--        &ndash;&gt;-->
<!--        <constructor>-->
<!--            <idArg column="id"  javaType="java.lang.String" jdbcType="LONGVARCHAR" />-->
<!--            <arg column="userId" javaType="java.lang.Integer" jdbcType="INTEGER" />-->
<!--            <arg column="title" javaType="java.lang.String" jdbcType="LONGVARCHAR" />-->
<!--            <arg column="descr" javaType="java.lang.String" jdbcType="LONGVARCHAR" />-->
<!--            <arg column="createTime" javaType="java.util.Date" jdbcType="DATE" />-->
<!--            <arg column="sendFlag" javaType="java.lang.Byte" jdbcType="TINYINT" />-->
<!--            <arg column="sendTotal" javaType="java.lang.Integer" jdbcType="INTEGER" />-->
<!--            <arg column="delFlag" javaType="java.lang.Byte" jdbcType="TINYINT" />-->
<!--            <arg column="content" javaType="java.lang.String" jdbcType="LONGVARCHAR" />-->
<!--            <arg column="files" javaType="java.lang.String" jdbcType="LONGVARCHAR" />-->
<!--            <arg column="createUtp" javaType="java.lang.Integer" jdbcType="INTEGER" />-->
<!--        </constructor>-->
<!--    </resultMap>-->

    <resultMap id="ResultMapMessages" type="com.spring.web.model.Messages" >
        <result column="id"  property="id" javaType="java.lang.String" jdbcType="LONGVARCHAR" />
        <result column="user_id" property="userId" javaType="java.lang.Integer" jdbcType="INTEGER" />
        <result column="title"  property="title" javaType="java.lang.String" jdbcType="LONGVARCHAR" />
        <result column="descr" property="descr" javaType="java.lang.String" jdbcType="LONGVARCHAR" />
        <result column="create_time" property="createTime" javaType="java.sql.Timestamp" jdbcType="TIMESTAMP" />
        <result column="send_flag" property="sendFlag" javaType="java.lang.Byte" jdbcType="TINYINT" />
        <result column="send_total" property="sendTotal" javaType="java.lang.Integer" jdbcType="INTEGER" />
        <result column="del_flag" property="delFlag" javaType="java.lang.Byte" jdbcType="TINYINT" />
        <result column="content" property="content" javaType="java.lang.String" jdbcType="LONGVARCHAR" />
        <result column="files"  property="files" javaType="java.lang.String" jdbcType="LONGVARCHAR" />
        <result column="create_utp" property="createUtp" javaType="java.lang.Integer" jdbcType="INTEGER" />
    </resultMap>



    <select id="findMessageList" resultMap="ResultMapMessages">
        select
        *
        from messages
        where user_id = #{userId}
        limit #{pageNo},#{pageSize}
    </select>

    <select id="findMessageDetail" parameterType="java.lang.String" resultMap="ResultMapMessages">
        select
        *
        from messages
        where id = #{id}
    </select>

    <select id="findTCheckList"  resultType="com.spring.web.model.TCheck">
        select
        *
        from t_check_tbl
        where user_id = #{cid}
        ORDER BY create_time DESC
        LIMIT #{pageNo},#{pageSize}
    </select>

    <select id="findCheckById" parameterType="java.lang.String" resultType="com.spring.web.model.TCheck">
        select
        *
        from t_check_tbl
        where id = #{checkId}
    </select>

    <select id="findPersonnel" parameterType="java.lang.String" resultType="com.spring.web.model.ZzjgPersonnel">
        select
        *
        from zzjg_personnel_tbl
        where id = #{userId}
    </select>

    <select id="findRectificationList" parameterType="java.lang.String" resultType="java.util.Map">
        select a.*,b.`name`
        from t_check_item_tbl a left JOIN t_check_part_tbl b ON a.part_id = b.id
        WHERE a.check_id = #{checkId} and status = 2
    </select>

    <select id="findTRectification" parameterType="java.lang.String" resultType="com.spring.web.model.TRectification">
        select
        *
        from t_rectification_tbl
        where check_id = #{checkId}
    </select>

</mapper>